#!/bin/bash

case "$1" in
    paste)
      #paste android device from clipboard
        text=$(xsel --clipboard --output | sed -e "s/\ /\\\ /g" | sed -e "s/(/\\\(/g");
        adb shell input text "$text"
      ;;
    debugkey)
        #show debugkey info
        read -sp "Password: " pass
        
        expect -c "
          set timeout 30
          spawn env HOME=\"/home/ryota\" keytool -list -v -keystore ${HOME}/.android/debug.keystore
          expect \"キーストアのパスワードを入力してください:\"
          send \"${pass}\"
          exit 0;
        "
        expect -c "
          set timeout 30
          spawn keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64
          expect \"キーストアのパスワードを入力してください:\"
          send \"${pass}\"
          expect \"$\"
          exit 0
        "
        ;;
   list-devices)
       adb devices
       ;;
    *)
        echo "Usage: $0 {paste|debugkey|list-devices}"
        exit 2
esac

exit 0

